# BeeAI Platform Agent Template

This repository provides a template for creating a Python agent that can be used with the [BeeAI Platform](https://docs.beeai.dev).

## Overview

BeeAI agents are Python-based services that can be run locally or deployed to the BeeAI Platform. Each agent exposes specific functionality through the [A2A (Agent2Agent Protocol)](https://github.com/a2aproject/A2A) which is implemented via SDK.

In this template, you'll find:
- A basic agent implementation
- Docker configuration to ease the build of agent
- Project structure for building your own agents

## Project Structure

```sh
â”œâ”€â”€ src/                                    # Source code directory
â”‚   â””â”€â”€ beeai_agents/                       # Python package directory
â”‚       â”œâ”€â”€ __init__.py                     # Package initialization (empty)
â”‚       â””â”€â”€ agent.py                        # Agent implementations (main file you'll modify)
â”œâ”€â”€ Dockerfile                              # Container configuration to build the agent
â”œâ”€â”€ pyproject.toml                          # Package metadata and dependencies
â”œâ”€â”€ uv.lock                                 # Dependency lock file (generated by UV)
â””â”€â”€ README.md                               # Project documentation
```

**Key files to focus on:**

- `agent.py`: This is where you'll implement your agent logic
- `pyproject.toml`: Update this if you need to add dependencies
- `Dockerfile`: Modify if you need special build configuration

## Requirements

- [BeeAI Platform](https://docs.beeai.dev/introduction/quickstart) installed
- Python 3.11 or higher
- [UV package manager](https://docs.astral.sh/uv/) for dependency management

## Getting Started

1. **Set up your project**. Start by using this template for your own agent. You may use this as a template or fork this repository.

2. **Install dependencies** using `uv sync`.

3. **Implement your agent** by modifying the source code located in [src/beeai_agents/server.py](src/beeai_agents/agent.py).

Here's an example of the included template agent:

```py
@server.agent(
    default_input_modes=SUPPORTED_CONTENT_TYPES,
    default_output_modes=SUPPORTED_CONTENT_TYPES,
    details=AgentDetail(ui_type="chat"),
    capabilities=AgentCapabilities(
        streaming=True,
    )
)
async def example_agent(input: Message, context: Context):
    """Polite agent that greets the user"""
    hello_template: str = os.getenv("HELLO_TEMPLATE", "Ciao %s!")
    yield hello_template % get_message_text(input)
```

Modify this file to implement your own agent's logic. Here are some key points to consider when creating your agent:
- The function name (example_agent above) is used as the unique id for the agent in the platform. You can override this in the `details`.
- The docstring is used as the agent's description in the platform UI. You can also override this in the `details`.
- The `@server.agent()` decorator registers your function as an agent and can customize its appearance and behavior
- `get_message_text` is exposed from `a2a.utils.message` to simplify text message extraction
- Your agent receives A2A message in the `input`
- Return responses using `yield AgentMessage` or simply `yield "some string"`
- Access conversation context through the `context` parameter

### ðŸ–¥ï¸ Enhancing the User Experience with `AgentDetail`

The BeeAI Platform SDK leverages A2A extensions to enhance the functionality of your agents; For example, how they are visualized in the platform UI.

When using the `server.agent` decorator, you can specify `details`, which the SDK converts into an `AgentDetailExtension`. This extension is automatically added to your agent and allows you to configure UI-related elements such as the agentâ€™s description, display name, and more.

To create the most engaging and helpful interface for your users, define the following metadata in your agent decorator. This information shapes how your agent is presented in the GUI.

```py
@server.agent(
    default_input_modes=SUPPORTED_CONTENT_TYPES,
    default_output_modes=SUPPORTED_CONTENT_TYPES,
    details=AgentDetail(
        ui_type=PlatformUIType.CHAT,
        display_name="Chat Agent",
        description=(
            "Conversational agent with memory, supporting real-time search, "
            "Wikipedia lookups, and weather updates through integrated tools"
        ),
        user_greeting="Hello! I'm your AI assistant. How can I help you today?",
        tools=[
            AgentToolInfo(name="Weather", description=""),
            AgentToolInfo(name="Wikipedia", description=""),
            AgentToolInfo(
                name="Google Search", description=""
            ),
        ],
        framework="BeeAI",
        recommended_models=["llama3.3:70b-instruct-fp16"],
        author={
            "name": "John Smith",
            "email": "jsmith@example.com",
            "url": "https://example.com"
        }
    ),
    capabilities=AgentCapabilities(
        streaming=True,
    )
)
```

>[!Note]
>The example above highlights the components that directly impact the **GUI experience**. For the complete metadata specification, see the [BeeAI SDK](TODO) documentation.

4. **Update project metadata and dependencies** in the `pyproject.toml` file. After updating, synchronize with `uv sync`.

## Running Agents Locally

To test your agent locally:

```sh
# Start the agent server
uv run server
```

This will start a local http server on http://127.0.0.1:8000 by default. You'll get an output similar to:

```
INFO     | uvicorn.error | Started server process [83016]
INFO     | uvicorn.error | Waiting for application startup.
INFO     | beeai_sdk    | Registering agent to the beeai platform
INFO     | uvicorn.error | Application startup complete.
INFO     | uvicorn.error | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO     | beeai_sdk    | Agent registered successfully
```

Your agents should now be started on http://127.0.0.1:8000. You can verify your agents are running with the BeeAI CLI:

```sh
# List available agents
beeai list

# Run the example agent
beeai run example_agent "Your Name"
```

## Adding Agents to BeeAI Platform

There are two ways to add your agent to the BeeAI Platform:

### Local Development Mode

When running agents locally with `uv run server`, they are automatically registered with the BeeAI Platform. In this mode:
- The BeeAI Platform will communicate with your local server
- You manage the agent's lifecycle (starting/stopping)
- Changes are immediately available without redeployment

### Deployment from GitHub

To share your agent with others or deploy it to the BeeAI Platform:

- Push your agent code to a GitHub repository
- Add the agent to BeeAI using: `beeai add https://github.com/your-username/your-repo-name`

The BeeAI Platform will automatically:
- Clone your repository
- Build a Docker image
- Start the agent container
- Extract agent configuration directly from the `/agents` endpoint
- Register the agent in the platform

#### Version Management

- For stable versions, use Git tags (e.g., `agents-v0.0.1`)
- When adding a tagged version: `beeai add https://github.com/your-username/your-repo-name@agents-v0.0.1`
- To update: remove the old version (`beeai remove <agent-name>`) and add the new one

## Troubleshooting

### Agent Status

To check the status of your agents:

```sh
# List all agents and their status
beeai list
```

### Logs

- **Local agents:** View logs directly in the terminal where you ran `uv run server`
- **Managed agents:** Use `beeai logs <agent-id>` to view logs
- **BeeAI server logs:** Check `/opt/homebrew/var/log/beeai-server.log` (default location)
